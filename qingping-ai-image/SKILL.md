---
name: qingping-ai-image
description: 使用青萍AI生成和编辑图片的技能。当用户要求"生成图片"、"用青萍AI生图"、"画一张图"、"修改图片"、"编辑图片"或提供图片URL和描述时触发此技能。支持文生图（文本生成图片）和图生图（基于参考图片生成新图片）两种模式。
---

# 青萍AI图片生成与编辑

## 概述

本技能使用青萍AI MCP工具为用户生成和编辑图片。支持两种模式：
1. **文生图**：根据文本描述生成新图片
2. **图生图**：基于参考图片URL和文本提示词生成新图片（支持风格迁移、图片编辑、多图融合等）

## 触发条件

### 文生图触发词
当用户说以下任一表达时，使用文生图模式：
- "生成一张图片"
- "用青萍AI画一张图"
- "帮我生成图片"
- "画一个[描述]"
- "生成一个[描述]"
- 或者直接提供图片描述，如"一只猫在睡觉"

### 图生图触发词
当用户说以下任一表达时，使用图生图模式：
- "修改这张图片"
- "编辑图片：[URL]"
- "基于这张图片生成：[URL]"
- "帮我把这张图片[修改要求]：[URL]"
- "用青萍AI处理这张图片：[URL]"
- 提供图片URL并说明修改要求

## 执行步骤

### 文生图模式

#### 第一步：提取提示词

从用户的请求中提取图片描述。如果用户没有明确说明，根据上下文理解用户想要生成的图片内容。

**提示词优化建议**：
- 尽量描述具体：主体、场景、风格、氛围等
- 使用简洁的中文描述
- 包含关键视觉元素

**示例提示词**：
- "一只可爱的狗在睡觉"
- "未来科技感的城市夜景，赛博朋克风格"
- "山水画风格，水墨画，中国传统艺术"

#### 第二步：调用青萍AI文生图工具

使用 MCP 工具 `mcp__qingping-ai-mcp__generate_image` 生成图片。

**参数配置**：
- `prompt`: 用户提供的图片描述（必填）
- `image_count`: 生成图片数量，默认为1
- `image_size`: 图片尺寸比例，默认为"auto"，可选值：["auto", "1:1", "16:9", "9:16", "4:3", "3:4"]

#### 第三步：返回结果

工具调用成功后，向用户展示以下信息：
- 生成的提示词内容
- 本地保存路径
- 在线查看链接
- 生成耗时

**输出格式示例**：
```
图片生成成功！

生成信息：
- 图片描述：[提示词内容]
- 本地保存路径：[local_path]
- 在线查看链接：[cdn_url]
- 生成耗时：[time]秒
```

### 图生图模式

#### 第一步：提取图片URL和提示词

从用户的请求中提取：
1. **参考图片URL**：必须是有效的图片链接（1-4个）
2. **文本提示词**：描述要进行的修改或生成要求

**提示词类型**：
- **图片编辑**："去除红色框选区域"、"把背景换成蓝天"、"把猫改成狗"
- **风格迁移**："油画风格"、"水墨画风格"、"赛博朋克风格"
- **内容变体**："换个角度"、"换个颜色"、"保持主题重新生成"
- **多图融合**："将图1的背景和图2的人物结合"

**示例请求**：
- "修改这张图片：https://example.com/image.png，去除红色框选区域的内容"
- "基于这张图片生成油画风格：https://example.com/photo.jpg"
- "把这张图片的背景改成海滩：https://example.com/img.png"

#### 第二步：调用青萍AI图生图工具

使用 Node.js 直接调用青萍AI图生图API：

```javascript
const result = await imageAPI.imageToImageAndDownload({
  prompt: "用户提供的修改要求",
  source_image_urls: ["图片URL"],
  image_size: "auto",
  image_resolution: "1K",
  image_count: 1,
  model: "google/gemini-2.5-flash-image"
});
```

**参数配置**：
- `prompt`: 用户提供的修改要求（必填）
- `source_image_urls`: 参考图片URL数组，1-4个（必填）
- `image_size`: 图片尺寸比例，默认为"auto"
- `image_resolution`: 图片分辨率，可选值：["1K", "2K", "4K"]，默认为"1K"
- `image_count`: 生成数量，默认为1
- `model`: 使用的模型，默认为"google/gemini-2.5-flash-image"

#### 第三步：返回结果

工具调用成功后，向用户展示以下信息：
- 修改要求描述
- 参考图片URL
- 本地保存路径
- 在线查看链接
- 生成耗时

**输出格式示例**：
```
图片修改成功！

修改信息：
- 修改要求：[提示词内容]
- 参考图片：[source_image_urls]
- 本地保存路径：[local_path]
- 在线查看链接：[cdn_url]
- 生成耗时：[time]秒
```

## 注意事项

### 通用注意事项
- 如果用户的提示词过于简单，可以适当优化补充，但不改变用户原本意图
- 图片会自动保存到 `downloads/images/` 目录
- 支持的图片格式：PNG、JPG
- 默认生成1张图片，如需更多可以询问用户
- 生成过程通常需要20-30秒

### 图生图特定注意事项
- **URL验证**：确保提供的图片URL是有效的、可访问的
- **图片数量**：支持1-4张参考图片，多图可以实现融合效果
- **编辑准确性**：图片编辑效果取决于提示词的清晰度和具体性
- **分辨率选择**：
  - 1K：快速生成，适合预览
  - 2K：平衡质量和速度
  - 4K：高质量，但生成时间较长
- **适用场景**：
  - ✅ 去除图片中的物体
  - ✅ 更换背景
  - ✅ 修改图片风格
  - ✅ 局部编辑和修改
  - ✅ 多图内容融合

## 快捷用法

### 文生图示例
用户可以直接说：
- "生成一张猫的图片"
- "用青萍AI画一幅山水画"
- "生成一个赛博朋克风格的城市"
- "画一只在睡觉的狗"

### 图生图示例
用户可以直接说：
- "修改这张图片，把背景换成蓝天：https://example.com/image.jpg"
- "基于这张图片生成油画风格：https://example.com/photo.png"
- "去除这张图片中的人：https://example.com/photo.jpg"
- "把这张图片改成素描风格：https://example.com/img.png"

系统会自动识别模式并调用相应的工具。
